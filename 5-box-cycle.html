<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>5-Stage Production Workflow</title>
    <style>
        :root {
            --bg-color: #0f172a;
            --box-bg: #1e293b;
            --accent: #38bdf8;
            --text: #f1f5f9;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            overflow-x: hidden;
        }

        /* --- Layout --- */
        .diagram-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 40px;
            min-height: 200px;
        }

        .step-container {
            display: flex;
            align-items: center;
            opacity: 0.3;
            transform: scale(0.9);
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .step-container.active {
            opacity: 1;
            transform: scale(1);
        }

        .box {
            width: 160px;
            height: 100px;
            background: var(--box-bg);
            border: 2px solid #334155;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .step-container.active .box {
            border-color: var(--accent);
            box-shadow: 0 0 20px rgba(56, 189, 248, 0.3);
        }

        .emoji-display { font-size: 2.2rem; margin-bottom: 5px; }
        .text-display { font-size: 0.85rem; font-weight: 600; text-align: center; padding: 0 5px; }

        .arrow {
            font-size: 1.5rem;
            margin: 0 10px;
            color: #475569;
        }

        .step-container.active .arrow { color: var(--accent); }

        /* --- Dashboard --- */
        .dashboard {
            background: white;
            color: #334155;
            padding: 20px;
            border-radius: 12px;
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-top: 40px;
        }

        .input-card { display: flex; flex-direction: column; gap: 5px; font-size: 12px; }
        input, select { padding: 6px; border: 1px solid #ddd; border-radius: 4px; }
        
        .controls {
            grid-column: span 5;
            display: flex;
            justify-content: center;
            margin-top: 15px;
        }

        button {
            padding: 10px 30px;
            background: #0ea5e9;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="diagram-wrapper" id="canvas">
        </div>

    <div class="dashboard" id="ui">
        </div>

    <script>
        const stages = [
            { label: "Clone Repo", emoji: "ðŸ“‚" },
            { label: "Configure Env", emoji: "âš™ï¸" },
            { label: "Install Deps", emoji: "ðŸ“¦" },
            { label: "Run Build", emoji: "ðŸ› ï¸" },
            { label: "Deploy App", emoji: "ðŸš€" }
        ];

        const emojiOptions = ["ðŸ“‚", "âš™ï¸", "ðŸ“¦", "ðŸ› ï¸", "ðŸš€", "ðŸ’»", "ðŸ§ª", "ðŸŽ¬", "ðŸŽ¨", "âœ…"];

        function init() {
            const canvas = document.getElementById('canvas');
            const ui = document.getElementById('ui');
            
            stages.forEach((s, i) => {
                // Build Diagram HTML
                canvas.innerHTML += `
                    <div class="step-container" id="step-${i}">
                        <div class="box">
                            <span class="emoji-display" id="disp-e-${i}">${s.emoji}</span>
                            <span class="text-display" id="disp-t-${i}">${s.label}</span>
                        </div>
                        ${i < 4 ? '<div class="arrow">âž”</div>' : ''}
                    </div>
                `;

                // Build UI HTML
                ui.innerHTML += `
                    <div class="input-card">
                        <strong>Stage ${i+1}</strong>
                        <select id="sel-e-${i}">
                            ${emojiOptions.map(e => `<option value="${e}" ${e === s.emoji ? 'selected' : ''}>${e}</option>`).join('')}
                        </select>
                        <input type="text" id="sel-t-${i}" value="${s.label}">
                    </div>
                `;
            });

            ui.innerHTML += `<div class="controls"><button onclick="playSequence()">â–¶ Start 3s Cycle</button></div>`;
        }

        async function playSequence() {
            // Update values from UI
            for(let i=0; i<5; i++) {
                document.getElementById(`disp-e-${i}`).innerText = document.getElementById(`sel-e-${i}`).value;
                document.getElementById(`disp-t-${i}`).innerText = document.getElementById(`sel-t-${i}`).value;
                document.getElementById(`step-${i}`).classList.remove('active');
            }

            // Play staggered 3s sequence
            for(let i=0; i<5; i++) {
                document.getElementById(`step-${i}`).classList.add('active');
                await new Promise(r => setTimeout(r, 3000));
            }
        }

        init();
    </script>
</body>
</html>
